(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ak5n:function(t,e,s){"use strict";s.r(e),s.d(e,"GraphExampleModule",(function(){return y}));var i=s("ofXK"),a=s("npB/"),o=s("tyNb"),n=s("fXoL"),r=s("mrSG");function l(){const t=[];for(let e=0;e<1e3;e++)t.push(40*Math.random()+30);return t}let h=(()=>{let t=class{constructor(){this.showData=!1,this.data=l(),this.data2=l(),this.data3=l(),this.text="Hello world",this.textX=0,this.textY=0,this.rectX=20,this.rectY=20,this.mouseX=0,this.mouseY=0,this.deltaX=0,this.step=10}onMouseMove(t){this.mouseX=t.offsetX,this.mouseY=t.offsetY,this.showData=!0}onMouseWheel(t){if(t.preventDefault(),!0===this.ctrlPressed){const e=this.step+t.deltaY/100;if(e>.01){const t=Math.abs(this.deltaX/this.step),s=Math.abs(this.mouseX/this.step),i=this.mouseX-(t+s)*e;this.deltaX=i<0?i:0,this.step=e}}else{const e=this.deltaX-t.deltaY;this.deltaX=e<0?e:0}}onKeyDown(t){"Control"===t.key&&(this.ctrlPressed=t.ctrlKey)}onKeyUp(t){"Control"===t.key&&(this.ctrlPressed=t.ctrlKey)}onMouseOn(){this.showData=!0}onMouseOut(){this.showData=!1}ngOnInit(){setInterval(()=>{this.data2=l(),this.rectX=100*Math.random(),this.rectY=100*Math.random()},1e3)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.xb({type:t,selectors:[["app-graph-canvas-example"]],hostBindings:function(t,e){1&t&&n.Nb("mousemove",(function(t){return e.onMouseMove(t)}))("mousewheel",(function(t){return e.onMouseWheel(t)}))("keydown",(function(t){return e.onKeyDown(t)}),!1,n.Vb)("keyup",(function(t){return e.onKeyUp(t)}),!1,n.Vb)("mouseup",(function(){return e.onMouseOn()}))("mouseout",(function(){return e.onMouseOut()}))},decls:7,vars:14,consts:[[1,"first"],["w","20","h","20",3,"x","y"],[3,"x1","x2","y1","y2"],["strokeStyle","orange",3,"data","step","deltaX"],["strokeStyle","green",3,"data","step","deltaX"],["strokeStyle","blue",3,"data","deltaX"]],template:function(t,e){1&t&&(n.Gb(0,"canvas",0),n.Eb(1,"rect",1),n.Eb(2,"line",2),n.Fb(),n.Gb(3,"canvas"),n.Eb(4,"graph-line",3),n.Eb(5,"graph-line",4),n.Eb(6,"graph-line",5),n.Fb()),2&t&&(n.ub(1),n.Sb("x",e.mouseX)("y",20),n.ub(1),n.Sb("x1",10)("x2",100)("y1",10)("y2",200),n.ub(2),n.Sb("data",e.data)("step",e.step)("deltaX",e.deltaX),n.ub(1),n.Sb("data",e.data2)("step",e.step)("deltaX",e.deltaX),n.ub(1),n.Sb("data",e.data3)("deltaX",e.deltaX))},styles:["p[_ngcontent-%COMP%]{font-weight:600;color:red}canvas[_ngcontent-%COMP%]{width:100%}.first[_ngcontent-%COMP%]{z-index:11}"]}),t=Object(r.a)([a.CanvasComponent],t),t})(),d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.xb({type:t,selectors:[["app-title"]],decls:3,vars:0,template:function(t,e){1&t&&(n.Gb(0,"p"),n.ac(1,"Graph example"),n.Fb(),n.Eb(2,"app-graph-canvas-example"))},directives:[h],styles:["[_nghost-%COMP%]{width:100%;display:flex}app-graph-canvas-example[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:250px}"]}),t})(),c=(()=>{let t=class{constructor(){this.text="",this.x=0,this.y=20,this.fillStyle="black"}appendChild(t){}addClass(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e}setNgProperty(t,e){this[t]=e}setStyle(t,e,s){}setValue(t){}draw(t){this.text&&this.x&&this.y&&(t.fillStyle=this.fillStyle,t.fillText(this.text,this.x,this.y))}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"text"})],t),t})(),p=(()=>{let t=class{constructor(){this.fillStyle="black"}appendChild(t){}addClass(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}setStyle(t,e,s){}setValue(){}draw(t){t.fillRect(this.x,this.y,this.w,this.h)}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"rect"})],t),t})(),u=(()=>{let t=class{constructor(){this.strokeStyle="black"}appendChild(t){}addClass(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}setStyle(t,e,s){}setValue(){}draw(t){t.strokeStyle=this.strokeStyle,t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke()}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"line"})],t),t})(),m=(()=>{let t=class{constructor(){this.deltaX=0,this.lineWidth=2,this.min=0,this.max=100,this.step=20,this.horizontal=!0,this.strokeStyle="black",this.animationBlock=1}appendChild(t){}addClass(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e}setNgProperty(t,e){if("data"===t){this.data&&(this.oldData=this.data.slice()),this.data=e;const t=this.oldData||new Array(this.data.length).fill(0);this.waypointsData=function(t,e){const s=[],i=[];for(let a=0;a<t.length;a++){const s=t[a],o=e[a]-s,n=[];for(let t=0;t<30;t++)n.push(s+o*t/30||0);i.push(n)}for(let a=0;a<30;a++){const e=[];for(let s=0;s<t.length;s++)e.push(i[s][a]);s.push(e)}return s}(t,this.data),this.animationBlock=1}else this[t]=e;this.parent.drawAll()}setStyle(t,e,s){}setValue(){}draw(t){if(this.data&&this.data.length){t.strokeStyle=this.strokeStyle;const e=this.animationBlock;this.drawAnimate(t,this.waypointsData[this.waypointsData[e]?e:this.waypointsData.length-1]),this.animationBlock++,this.needDraw=e<30}}drawAnimate(t,e){const s=this.deltaX,i=this.step,a=Math.floor(Math.abs(s/i)),o=Math.floor(Math.abs(this.getAxisSize(!this.horizontal)/i)),n=e.slice(a,a+o),r=this.getAxisSize(this.horizontal)/(this.max-this.min),l=this.horizontal;t.lineWidth=this.lineWidth,t.beginPath();for(let h=0;h<n.length;h++){const e=s+(a+h)*i;l?t.lineTo(e,n[h]*r):t.lineTo(n[h]*r,e)}t.stroke()}getAxisSize(t){return t?this.parent.element.height:this.parent.element.width}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"graph-line"})],t),t})(),b=(()=>{let t=class{constructor(){this.deltaX=0,this.lineWidth=1,this.step=20,this.horizontal=!1,this.strokeStyle="gray"}appendChild(t){}insertBefore(t,e){}removeAttribute(t,e){}removeChild(t){this.parent.removeChild(t)}removeClass(t){}removeStyle(t,e){}setNgAttribute(t,e,s){this[t]=e,this.parent&&this.parent.drawAll()}setNgProperty(t,e){this[t]=e,this.parent.drawAll()}setStyle(t,e,s){}setValue(){}draw(t){const e=this.parent.element.width,s=this.parent.element.height,i=this.deltaX,a=this.step,o=Math.floor(Math.abs(i/a)),n=Math.floor(Math.abs(s/a));t.beginPath();for(let l=o;l<=n;l+=a){const s=Math.round(l);t.moveTo(0,i+s),t.lineTo(e,i+s)}const r=(e-1)/4;for(let l=0;l<5;++l){const e=Math.round(r*l);t.moveTo(e,0),t.lineTo(e,s)}t.lineWidth=this.lineWidth,t.strokeStyle=this.strokeStyle,t.stroke()}addClass(t){}};return t=Object(r.a)([Object(a.CanvasElement)({selector:"grid"})],t),t})();s("5/jd");let y=(()=>{class t{}return t.\u0275mod=n.Bb({type:t}),t.\u0275inj=n.Ab({factory:function(e){return new(e||t)},providers:[],imports:[[i.b,a.CanvasDomModule.forRoot([c,p,u,m,b]),o.a.forChild([{path:"",component:d}])]]}),t})()}}]);